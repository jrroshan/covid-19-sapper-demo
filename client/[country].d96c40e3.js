import{S as e,i as a,s as t,e as s,t as r,k as o,c,a as n,b as i,d as l,l as h,f as d,g as u,h as v,z as f,n as m,o as p,L as y,A as g,B as $,C as b,T as C,U as D,F as S,G as E,H as w,u as L,q as k,J as x,V as I,W as P,M as H,E as T,I as V}from"./client.021071b2.js";import{_ as M,d as A}from"./data-store.ca408331.js";import{f as B,F,T as R}from"./helpers.39b6181a.js";function N(e){let a,t,p,y,g,$,b,C,D,S,E,w,L,k,x,I,P,H,T,V,M,A,B,F,R,N,O,U,K,j,G,J,Y,q,z,W,Q,X,Z,_=e[0].toLocaleString()+"",ee=e[1].toLocaleString()+"",ae=e[2].toLocaleString()+"",te=e[3].toLocaleString()+"",se=e[4].toLocaleString()+"",re=e[6].toLocaleString()+"",oe=e[5].toLocaleString()+"",ce=e[7].toLocaleString()+"";return{c(){a=s("div"),t=s("div"),p=s("div"),y=s("h3"),g=r("Cases: "),$=r(_),b=o(),C=s("h3"),D=r("Cases Today: "),S=r(ee),E=o(),w=s("h3"),L=r("Cases Per Million: "),k=r(ae),x=o(),I=s("div"),P=s("h3"),H=r("Recovered: "),T=r(te),V=o(),M=s("h3"),A=r("Active: "),B=r(se),F=o(),R=s("h3"),N=r("Critical: "),O=r(re),U=o(),K=s("div"),j=s("h3"),G=r("Deaths: "),J=r(oe),Y=o(),q=s("h3"),z=r("Deaths Today: "),W=r(ce),Q=o(),X=s("div"),Z=s("canvas"),this.h()},l(e){a=c(e,"DIV",{class:!0});var s=n(a);t=c(s,"DIV",{class:!0});var r=n(t);p=c(r,"DIV",{class:!0});var o=n(p);y=c(o,"H3",{});var d=n(y);g=i(d,"Cases: "),$=i(d,_),d.forEach(l),b=h(o),C=c(o,"H3",{});var u=n(C);D=i(u,"Cases Today: "),S=i(u,ee),u.forEach(l),E=h(o),w=c(o,"H3",{});var v=n(w);L=i(v,"Cases Per Million: "),k=i(v,ae),v.forEach(l),o.forEach(l),x=h(r),I=c(r,"DIV",{class:!0});var f=n(I);P=c(f,"H3",{});var m=n(P);H=i(m,"Recovered: "),T=i(m,te),m.forEach(l),V=h(f),M=c(f,"H3",{});var ne=n(M);A=i(ne,"Active: "),B=i(ne,se),ne.forEach(l),F=h(f),R=c(f,"H3",{});var ie=n(R);N=i(ie,"Critical: "),O=i(ie,re),ie.forEach(l),f.forEach(l),U=h(r),K=c(r,"DIV",{class:!0});var le=n(K);j=c(le,"H3",{});var he=n(j);G=i(he,"Deaths: "),J=i(he,oe),he.forEach(l),Y=h(le),q=c(le,"H3",{});var de=n(q);z=i(de,"Deaths Today: "),W=i(de,ce),de.forEach(l),le.forEach(l),Q=h(r),X=c(r,"DIV",{class:!0});var ue=n(X);Z=c(ue,"CANVAS",{}),n(Z).forEach(l),ue.forEach(l),r.forEach(l),s.forEach(l),this.h()},h(){d(p,"class","four wide column"),d(I,"class","four wide column"),d(K,"class","four wide column"),d(X,"class","four wide column"),d(t,"class","ui grid"),d(a,"class","ui container")},m(s,r){u(s,a,r),v(a,t),v(t,p),v(p,y),v(y,g),v(y,$),v(p,b),v(p,C),v(C,D),v(C,S),v(p,E),v(p,w),v(w,L),v(w,k),v(t,x),v(t,I),v(I,P),v(P,H),v(P,T),v(I,V),v(I,M),v(M,A),v(M,B),v(I,F),v(I,R),v(R,N),v(R,O),v(t,U),v(t,K),v(K,j),v(j,G),v(j,J),v(K,Y),v(K,q),v(q,z),v(q,W),v(t,Q),v(t,X),v(X,Z),e[9](Z)},p(e,[a]){1&a&&_!==(_=e[0].toLocaleString()+"")&&f($,_),2&a&&ee!==(ee=e[1].toLocaleString()+"")&&f(S,ee),4&a&&ae!==(ae=e[2].toLocaleString()+"")&&f(k,ae),8&a&&te!==(te=e[3].toLocaleString()+"")&&f(T,te),16&a&&se!==(se=e[4].toLocaleString()+"")&&f(B,se),64&a&&re!==(re=e[6].toLocaleString()+"")&&f(O,re),32&a&&oe!==(oe=e[5].toLocaleString()+"")&&f(J,oe),128&a&&ce!==(ce=e[7].toLocaleString()+"")&&f(W,ce)},i:m,o:m,d(t){t&&l(a),e[9](null)}}}function O(e,a,t){let s,{cases:r=0}=a,{todayCases:o=0}=a,{casesPerOneMillion:c=0}=a,{recovered:n=0}=a,{active:i=0}=a,{deaths:l=0}=a,{critical:h=0}=a,{todayDeaths:d=0}=a;return p(()=>{new Chart(s.getContext("2d"),{type:"pie",data:{labels:["Deaths","Recovered","Active"],datasets:[{data:[l,n,i],backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)"]}]},options:{}})}),e.$set=(e=>{"cases"in e&&t(0,r=e.cases),"todayCases"in e&&t(1,o=e.todayCases),"casesPerOneMillion"in e&&t(2,c=e.casesPerOneMillion),"recovered"in e&&t(3,n=e.recovered),"active"in e&&t(4,i=e.active),"deaths"in e&&t(5,l=e.deaths),"critical"in e&&t(6,h=e.critical),"todayDeaths"in e&&t(7,d=e.todayDeaths)}),[r,o,c,n,i,l,h,d,s,function(e){y[e?"unshift":"push"](()=>{t(8,s=e)})}]}class U extends e{constructor(e){super(),a(this,e,O,N,t,{cases:0,todayCases:1,casesPerOneMillion:2,recovered:3,active:4,deaths:5,critical:6,todayDeaths:7})}}function K(e){let a,t;return{c(){a=s("div"),t=s("canvas"),this.h()},l(e){a=c(e,"DIV",{class:!0});var s=n(a);t=c(s,"CANVAS",{}),n(t).forEach(l),s.forEach(l),this.h()},h(){d(a,"class","ui container")},m(s,r){u(s,a,r),v(a,t),e[2](t)},p:m,i:m,o:m,d(t){t&&l(a),e[2](null)}}}function j(e,a,t){let s,{historicData:r}=a;return p(()=>{new Chart(s.getContext("2d"),{type:"line",data:{datasets:[{label:"Cases",data:M.keys(r.cases).map(e=>({x:e,y:r.cases[e]})),fill:!1,borderColor:"rgb(100, 0, 200)"},{label:"Deaths",data:M.keys(r.deaths).map(e=>({x:e,y:r.deaths[e]})),fill:!1,borderColor:"rgb(255, 99, 132)"},{label:"Recovered",data:M.keys(r.recovered).map(e=>({x:e,y:r.recovered[e]})),fill:!1,borderColor:"rgb(54, 162, 235)"}]},options:{responsive:!0,title:{display:!0,text:"Covid-19 Stats"},scales:{xAxes:[{type:"time",time:{parser:"M/D/YY",tooltipFormat:"ll"},scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{scaleLabel:{display:!0,labelString:"Total Cases / Recovered / Deaths Reported"}}]}}})}),e.$set=(e=>{"historicData"in e&&t(1,r=e.historicData)}),[s,r,function(e){y[e?"unshift":"push"](()=>{t(0,s=e)})}]}class G extends e{constructor(e){super(),a(this,e,j,K,t,{historicData:1})}}const J=e=>({deaths:M.max(M.keys(e.deaths).map(a=>e.deaths[a])),recovered:M.max(M.keys(e.recovered).map(a=>e.recovered[a])),cases:M.max(M.keys(e.cases).map(a=>e.cases[a]))}),Y=(e,a)=>e[a.country]?(e[a.country].cases=q(e[a.country].cases,a.timeline.cases),e[a.country].recovered=q(e[a.country].recovered,a.timeline.recovered),e[a.country].deaths=q(e[a.country].deaths,a.timeline.deaths),e):(e[a.country]=z(a.timeline),e),q=(e,a)=>M.keys(e).reduce((t,s)=>(t[s]=Math.abs(+e[s])+Math.abs(+a[s]),t),{}),z=e=>{const a={};return a.deaths=W(e.deaths),a.recovered=W(e.recovered),a.cases=W(e.cases),a},W=e=>M.keys(e).reduce((a,t)=>(a[t]=Math.abs(+e[t]),a),{});var Q={byProvince:(e,a)=>a.data.filter(a=>a.country===e).filter(e=>!M.isEmpty(e.province)).filter(e=>!e.province.includes(",")).filter(e=>!e.province.includes("Princess")).map(e=>{const a=z(e.timeline);return{...e,...J(a),location:e.province}}),byCountry:e=>e.data.reduce(Y,{})};function X(e){let a,t,f,m,p,y,L,k,x,I,H;const T=[e[7]];let V={};for(let e=0;e<T.length;e+=1)V=P(V,T[e]);const M=new U({props:V}),A=new G({props:{historicData:e[6]}});return{c(){g(M.$$.fragment),a=o(),t=s("div"),f=s("h2"),m=r("Important Note"),p=o(),y=s("p"),L=r("The information below may not be 100% accurate. It's coming from JHU CSSE\n      GISand Data. The goal is to show how the covid-19 spreads over time and\n      what people mean when they talk about the curve. For more information\n      please consult the\n      "),k=s("a"),x=r("api github page."),I=o(),g(A.$$.fragment),this.h()},l(e){$(M.$$.fragment,e),a=h(e),t=c(e,"DIV",{id:!0,class:!0});var s=n(t);f=c(s,"H2",{});var r=n(f);m=i(r,"Important Note"),r.forEach(l),p=h(s),y=c(s,"P",{});var o=n(y);L=i(o,"The information below may not be 100% accurate. It's coming from JHU CSSE\n      GISand Data. The goal is to show how the covid-19 spreads over time and\n      what people mean when they talk about the curve. For more information\n      please consult the\n      "),k=c(o,"A",{href:!0});var d=n(k);x=i(d,"api github page."),d.forEach(l),o.forEach(l),s.forEach(l),I=h(e),$(A.$$.fragment,e),this.h()},h(){d(k,"href","https://github.com/novelcovid/api"),d(t,"id","note"),d(t,"class","ui container svelte-15rke7r")},m(e,s){b(M,e,s),u(e,a,s),u(e,t,s),v(t,f),v(f,m),v(t,p),v(t,y),v(y,L),v(y,k),v(k,x),u(e,I,s),b(A,e,s),H=!0},p(e,a){const t=128&a?C(T,[D(e[7])]):{};M.$set(t);const s={};64&a&&(s.historicData=e[6]),A.$set(s)},i(e){H||(S(M.$$.fragment,e),S(A.$$.fragment,e),H=!0)},o(e){E(M.$$.fragment,e),E(A.$$.fragment,e),H=!1},d(e){w(M,e),e&&l(a),e&&l(t),e&&l(I),w(A,e)}}}function Z(e){let a,t,f,m,p,C,D,L,k;function x(a){e[14].call(null,a)}function I(a){e[15].call(null,a)}let P={geoRegionName:"Province / State",selectFields:e[8]};void 0!==e[2]&&(P.sortBy=e[2]),void 0!==e[3]&&(P.search=e[3]);const V=new F({props:P});function M(a){e[16].call(null,a)}y.push(()=>H(V,"sortBy",x)),y.push(()=>H(V,"search",I));let A={geoRegionName:"Province / State",fields:e[8],sortBy:e[2],list:e[1]};void 0!==e[4]&&(A.page=e[4]);const B=new R({props:A});return y.push(()=>H(B,"page",M)),{c(){a=s("div"),t=s("h1"),f=r("Search By Province / State"),m=o(),g(V.$$.fragment),D=o(),g(B.$$.fragment),this.h()},l(e){a=c(e,"DIV",{class:!0});var s=n(a);t=c(s,"H1",{class:!0});var r=n(t);f=i(r,"Search By Province / State"),r.forEach(l),s.forEach(l),m=h(e),$(V.$$.fragment,e),D=h(e),$(B.$$.fragment,e),this.h()},h(){d(t,"class","svelte-15rke7r"),d(a,"class","ui container")},m(e,s){u(e,a,s),v(a,t),v(t,f),u(e,m,s),b(V,e,s),u(e,D,s),b(B,e,s),k=!0},p(e,a){const t={};!p&&4&a&&(p=!0,t.sortBy=e[2],T(()=>p=!1)),!C&&8&a&&(C=!0,t.search=e[3],T(()=>C=!1)),V.$set(t);const s={};4&a&&(s.sortBy=e[2]),2&a&&(s.list=e[1]),!L&&16&a&&(L=!0,s.page=e[4],T(()=>L=!1)),B.$set(s)},i(e){k||(S(V.$$.fragment,e),S(B.$$.fragment,e),k=!0)},o(e){E(V.$$.fragment,e),E(B.$$.fragment,e),k=!1},d(e){e&&l(a),e&&l(m),w(V,e),e&&l(D),w(B,e)}}}function _(e){let a,t,m,p,y,g,$,b,C,D;document.title=a="Covid 19 Tracker For "+e[0];let w=!e[5]&&X(e),I=e[1].length>0&&Z(e);return{c(){t=o(),m=s("div"),p=s("h1"),y=r("Country "),g=r(e[0]),$=o(),w&&w.c(),b=o(),I&&I.c(),C=L(),this.h()},l(a){k('[data-svelte="svelte-8c397"]',document.head).forEach(l),t=h(a),m=c(a,"DIV",{class:!0});var s=n(m);p=c(s,"H1",{class:!0});var r=n(p);y=i(r,"Country "),g=i(r,e[0]),r.forEach(l),s.forEach(l),$=h(a),w&&w.l(a),b=h(a),I&&I.l(a),C=L(),this.h()},h(){d(p,"class","svelte-15rke7r"),d(m,"class","ui container")},m(e,a){u(e,t,a),u(e,m,a),v(m,p),v(p,y),v(p,g),u(e,$,a),w&&w.m(e,a),u(e,b,a),I&&I.m(e,a),u(e,C,a),D=!0},p(e,[t]){(!D||1&t)&&a!==(a="Covid 19 Tracker For "+e[0])&&(document.title=a),(!D||1&t)&&f(g,e[0]),e[5]?w&&(V(),E(w,1,1,()=>{w=null}),x()):w?(w.p(e,t),S(w,1)):((w=X(e)).c(),S(w,1),w.m(b.parentNode,b)),e[1].length>0?I?(I.p(e,t),S(I,1)):((I=Z(e)).c(),S(I,1),I.m(C.parentNode,C)):I&&(V(),E(I,1,1,()=>{I=null}),x())},i(e){D||(S(w),S(I),D=!0)},o(e){E(w),E(I),D=!1},d(e){e&&l(t),e&&l(m),e&&l($),w&&w.d(e),e&&l(b),I&&I.d(e),e&&l(C)}}}async function ee(e){return{country:e.params.country}}function ae(e,a,t){let s,{country:r}=a,o=function(e){return"UK"===e?"United Kingdom":"S. Korea"===e?"Korea, South":e}(r),c=[],n=[],i="none",l="",h=0,d=!0,u={};let v={deaths:0,active:0,recovered:0,cases:0,casesPerOneMillion:0,todayDeaths:0,todayCases:0};return p(()=>{s=A.subscribe(e=>{if(!e)return;t(9,c=Q.byProvince(o,e.historicData));M.cloneDeep(e.historicData);t(6,u=Q.byCountry(e.historicData)[o]),t(7,v=e.dataByCountry.data.find(e=>e.location===r)),t(5,d=!1)})}),I(()=>{M.isFunction(s)&&(t(7,v=void 0),t(9,c=void 0),t(6,u=void 0),s())}),e.$set=(e=>{"country"in e&&t(0,r=e.country)}),e.$$.update=(()=>{520&e.$$.dirty&&t(1,n=B(c,l)),8&e.$$.dirty&&l.length>0&&t(4,h=0)}),[r,n,i,l,h,d,u,v,["Cases","Deaths","Recovered"],c,s,o,void 0,void 0,function(e){t(2,i=e)},function(e){t(3,l=e)},function(e){t(4,h=e),t(3,l)}]}export default class extends e{constructor(e){super(),a(this,e,ae,_,t,{country:0})}}export{ee as preload};
